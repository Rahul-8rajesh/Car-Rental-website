// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

// 1. പ്രധാന പശ്ചാത്തലങ്ങൾ (Kerala Theme Slider)
model HeroSlide {
  id          Int      @id @default(autoincrement())
  title       String?  // "Welcome to Shijin P.S Cars Online"
  subtitle    String?  // "Explore God's Own Country"
  image       String   @db.Text // Background Image (Houseboat, Coconut tree etc)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
}

// 2. വണ്ടികളുടെ തരം (Categories: Cars, Pickup, Travels)
model Category {
  id          Int      @id @default(autoincrement())
  name        String   @unique // "Cars", "Pickup", "Travels"
  slug        String   @unique // "cars", "pickup", "travels"
  image       String?  @db.Text
  subTypes    String[] // ["SUV", "Sedan", "Hatchback", "Electric"]
  cars        Car[]
  createdAt   DateTime @default(now())
}

// 3. വണ്ടികൾ (Cars)
model Car {
  id           Int      @id @default(autoincrement())
  name         String   // Innova Crysta
  model        String?  // 2024 Model
  rate         String   // ₹2500/day
  image        String   @db.Text 
  seats        Int?
  transmission String?  // "Manual", "Automatic"
  fuelType     String?  // "Diesel", "Petrol", "Electric"
  ac           Boolean? @default(true)
  featured     Boolean  @default(false)
  
  // ഏത് കാറ്റഗറി ആണെന്ന് (Car/Pickup/Bus)
  categoryId   Int?
  category     Category? @relation(fields: [categoryId], references: [id])
  
  bookings     Booking[]
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

// 4. ബുക്കിംഗ് (Bookings - WhatsApp & Admin)
model Booking {
  id             Int      @id @default(autoincrement())
  customerName   String
  customerPhone  String
  pickupLocation String
  pickupDate     String?
  needDriver     Boolean  @default(false)
  tripType       String?  // "Self Drive" or "Taxi"
  status         String   @default("pending") // pending, confirmed, completed
  
  carId          Int?
  car            Car?     @relation(fields: [carId], references: [id])
  
  createdAt      DateTime @default(now())
}

// 5. സേവനങ്ങൾ (Services - Like EVM)
model Service {
  id          Int      @id @default(autoincrement())
  title       String   // "24/7 Support", "Wedding Cars"
  description String   @db.Text
  icon        String?  // Icon name or Image URL
  createdAt   DateTime @default(now())
}

// 6. ഓഫറുകൾ (Offers Slider)
model Offer {
  id          Int      @id @default(autoincrement())
  title       String
  description String?  @db.Text
  image       String   @db.Text // Banner Image
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
}

// 7. റിവ്യൂ (Testimonials)
model Review {
  id           Int      @id @default(autoincrement())
  name         String
  rating       Int      // 1-5
  comment      String   @db.Text
  photo        String?  @db.Text // User photo
  isApproved   Boolean  @default(true)
  createdAt    DateTime @default(now())
}

// 8. സൈറ്റ് സെറ്റിംഗ്സ് (Phone, WhatsApp, About Us Text)
model SiteContent {
  id        Int      @id @default(autoincrement())
  key       String   @unique // "contact_phone", "whatsapp_number", "about_us_text"
  value     String   @db.Text
  label     String   // "Phone Number" (For Admin display)
  updatedAt DateTime @updatedAt
}